---
lang: ru-RU
title: Настройка SMTP-сервера Postfix
subtitle: Лабораторная работа №8
author:
  - Элсаиед Адел
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 4 января 2026

toc: false
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цель и задачи работы

## Цель лабораторной работы

Приобретение практических навыков установки, настройки и проверки работы SMTP-сервера Postfix в виртуальной среде.

# Выполнение работы

## Установка почтовых пакетов

На виртуальной машине server выполнена установка пакетов Postfix и s-nail, необходимых для организации и тестирования почтовой службы.

![Установка Postfix](Screenshot_1.png){ width=70% }

## SELinux и запуск службы

Выполнено восстановление контекстов безопасности SELinux.  
Служба Postfix добавлена в автозагрузку и успешно запущена.

![Запуск Postfix](Screenshot_3.png){ width=70% }

# Настройка Postfix

## Просмотр текущих параметров

Произведён анализ текущей конфигурации Postfix, включая параметры домена и источника исходящей почты.

![Просмотр параметров](Screenshot_4.png){ width=70% }

## Изменение параметров

В конфигурации Postfix выполнены изменения:
- настройка доменного имени;
- приведение параметра myorigin к mydomain;
- отключение IPv6;
- настройка сетевых интерфейсов.

![Изменение конфигурации](Screenshot_6.png){ width=70% }

## Отправка тестового письма

С сервера отправлено тестовое письмо локальному пользователю.  
Сообщение успешно принято и доставлено.

![Отправка письма](Screenshot_7.png){ width=70% }

## Анализ журналов

По журналу maillog подтверждена успешная доставка письма в локальный почтовый ящик.

![Журнал Postfix](Screenshot_8.png){ width=70% }

## Установка и запуск Postfix

На виртуальной машине client выполнена установка Postfix и s-nail, отключён IPv6, служба запущена.

![Postfix на клиенте](Screenshot_9.png){ width=70% }

## Ошибка доставки доменной почты

Письмо на доменный адрес помещено в очередь Postfix. В логах зафиксированы ошибки маршрутизации.

![Очередь Postfix](Screenshot_11.png){ width=70% }

## Настройка DNS

Добавлены:
- MX-запись для домена;
- A-запись почтового сервера;
- PTR-записи в обратной зоне.

![Прямая DNS-зона](Screenshot_13.png){ width=70% }

## Настройка DNS

![Обратная DNS-зона](Screenshot_14.png){ width=70% }

## Применение изменений

Выполнена перезагрузка Postfix и DNS, восстановлены SELinux-контексты.  
Очередь сообщений успешно обработана.

![Успешная доставка](Screenshot_16.png){ width=70% }

## Provisioning-скрипты

Созданы скрипты mail.sh для server и client, автоматизирующие:
- установку пакетов;
- настройку Postfix;
- запуск служб.

![Скрипт server](Screenshot_19.png){ width=70% }

## Provisioning-скрипты

![Скрипт client](Screenshot_20.png){ width=70% }

# Выводы

## Вывод

В ходе лабораторной работы выполнена установка и настройка SMTP-сервера Postfix. Обеспечена локальная и доменная доставка почты, настроены DNS-записи и сетевые параметры. Реализована автоматизация конфигурации почтовой подсистемы, что повышает воспроизводимость и упрощает развёртывание почтового сервера в виртуальной среде.
