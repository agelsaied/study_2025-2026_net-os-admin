---
## Front matter
title: "Отчёт по лабораторной работе 5"
subtitle: "Расширенная настройка HTTP-сервера Apache"
author: "Элсаиед Адел"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Приобретение практических навыков по расширенному конфигурированию HTTPсервера Apache в части безопасности и возможности использования PHP.

# Выполнение

## Конфигурирование HTTP-сервера для работы через протокол HTTPS и PHP

1. На виртуальной машине **server** в режиме суперпользователя был создан каталог для хранения закрытых ключей SSL `/etc/pki/tls/private`, а также символьная ссылка `/etc/ssl/private`, обеспечивающая совместимость с принятыми путями размещения SSL-ключей. После этого с использованием утилиты OpenSSL был сгенерирован самоподписанный SSL-сертификат и закрытый ключ длиной 2048 бит для доменного имени `www.elsaiedadel.net`.  
   В процессе генерации были заполнены поля Distinguished Name: код страны — RU, страна — Russia, город — Moscow, организация и подразделение — elsaiedadel, общее имя (CN) — elsaiedadel.net, адрес электронной почты — elsaiedadel@elsaiedadel.net. Сгенерированный сертификат был перемещён в каталог `/etc/ssl/certs`.

   ![Генерация SSL-сертификата и ключа OpenSSL](Screenshot_1.png){ #fig:006 width=80% }

2. После завершения генерации сертификата была выполнена проверка наличия созданных файлов в каталоге `/etc/pki/tls/private`, после чего сертификат `www.elsaiedadel.net.crt` был скопирован в системный каталог сертификатов `/etc/ssl/certs`, предназначенный для использования веб-сервером Apache.

   ![Проверка и копирование SSL-сертификата](Screenshot_2.png){ #fig:007 width=80% }

3. Для перевода веб-сервера на работу по протоколу HTTPS был отредактирован конфигурационный файл виртуального хоста `/etc/httpd/conf.d/www.elsaiedadel.net.conf`.  
   В секции `<VirtualHost *:80>` настроено автоматическое перенаправление всех HTTP-запросов на HTTPS с использованием механизма `RewriteRule`.  
   В секции `<VirtualHost *:443>` активирован SSL-модуль, указаны пути к файлам сертификата и закрытого ключа, а также заданы основные параметры виртуального хоста, включая имя сервера, каталог веб-документов и файлы журналов.

   ![Конфигурация виртуального хоста Apache для HTTPS](Screenshot_3.png){ #fig:008 width=80% }

4. После применения конфигурации был выполнен доступ к веб-серверу из браузера клиентской виртуальной машины. При обращении к адресу `www.elsaiedadel.net` было зафиксировано автоматическое перенаправление на защищённое соединение HTTPS. Браузер уведомил о том, что сертификат является самоподписанным, после чего адрес сервера был добавлен в список доверенных исключений.

   ![Проверка HTTPS-подключения в браузере](Screenshot_4.png){ #fig:009 width=80% }

5. В интерфейсе браузера было просмотрено содержимое установленного SSL-сертификата. В сертификате подтверждено соответствие полей Subject Name заданным значениям, включая доменное имя сервера, организацию и адрес электронной почты, что свидетельствует о корректной генерации и применении сертификата.

   ![Просмотр сведений SSL-сертификата](Screenshot_5.png){ #fig:010 width=80% }

6. Для проверки работы PHP на веб-сервере в каталоге `/var/www/html/www.elsaiedadel.net` был создан файл `index.php`, содержащий вызов функции `phpinfo()`. После этого при обращении к серверу через браузер была успешно отображена страница с информацией о версии PHP и параметрах окружения.

   ![Создание PHP-файла index.php](Screenshot_6.png){ #fig:011 width=80% }

7. В результате загрузки страницы `index.php` в браузере была выведена информация о версии PHP 8.3.26, конфигурации PHP-FPM, параметрах сборки и используемых расширениях, что подтверждает корректную установку и функционирование PHP на веб-сервере Apache.

   ![Отображение страницы phpinfo()](Screenshot_7.png){ #fig:012 width=80% }

8. Для сохранения внесённых изменений в систему автоматического развёртывания были скопированы конфигурационные файлы Apache, содержимое каталога веб-документов, а также файлы SSL-сертификата и закрытого ключа в каталог `/vagrant/provision/server/http`.  
   Дополнительно был модифицирован provisioning-скрипт `http.sh`, в который добавлены установка PHP, настройка межсетевого экрана для разрешения HTTPS-трафика, восстановление контекста SELinux и автоматический запуск сервиса httpd при старте системы.

   ![Обновление provisioning-скрипта и копирование конфигураций](Screenshot_8.png){ #fig:013 width=80% }

# Вывод

В ходе выполнения лабораторной работы было выполнено конфигурирование HTTP-сервера для работы через защищённый протокол HTTPS. На сервере был сгенерирован самоподписанный SSL-сертификат и настроен виртуальный хост Apache с поддержкой шифрованного соединения и автоматическим перенаправлением HTTP-запросов на HTTPS. Произведена настройка межсетевого экрана, разрешающая работу сервиса HTTPS, а также выполнена установка и проверка корректного функционирования PHP. Дополнительно были внесены изменения в provisioning-скрипты Vagrant, обеспечивающие автоматическое развёртывание веб-сервера с поддержкой HTTPS и PHP. Результаты проверки подтвердили корректную работу защищённого веб-доступа и серверной обработки PHP-скриптов.

# Контрольные вопросы

**1. В чём отличие HTTP от HTTPS?**  
HTTP — это протокол передачи данных прикладного уровня, обеспечивающий обмен информацией между клиентом и сервером в открытом виде без механизмов шифрования и проверки подлинности. HTTPS является расширением HTTP, использующим протокол TLS/SSL, который обеспечивает шифрование передаваемых данных, аутентификацию сервера и контроль целостности информации, что позволяет защитить соединение от перехвата и подмены данных.

**2. Каким образом обеспечивается безопасность контента веб-сервера при работе через HTTPS?**  
Безопасность при использовании HTTPS обеспечивается за счёт применения криптографических алгоритмов протокола TLS/SSL. В процессе установки соединения происходит обмен ключами, после чего весь передаваемый трафик шифруется симметричными алгоритмами. Цифровой сертификат сервера позволяет клиенту убедиться в подлинности веб-сайта, а механизмы контроля целостности данных предотвращают незаметное изменение информации в процессе передачи.

**3. Что такое сертификационный центр? Приведите пример.**  
Сертификационный центр — это доверенная организация, занимающаяся выпуском, подписанием и управлением цифровыми сертификатами, используемыми для подтверждения подлинности серверов и шифрования соединений. Сертификационный центр удостоверяет соответствие доменного имени владельцу сертификата и формирует цепочку доверия между клиентом и сервером. Примером сертификационного центра является Let’s Encrypt, предоставляющий бесплатные SSL/TLS-сертификаты для веб-сайтов.
